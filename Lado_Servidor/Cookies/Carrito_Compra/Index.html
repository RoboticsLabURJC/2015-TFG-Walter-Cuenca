<html>
  <head>
    <title>Ejemplo Carrito_Compra</title>
    <style type="text/css">
      div {
        /*border:solid;*/
        margin-top: 4px;
        margin:left; 
        width: 140px;
        height: 120px;
      }

      img{
        border:solid;
        width: 80px;
        height: 100px;
      }
      button{
        width: 40px;
        height: 20px;
      }
    </style>

    <script>
      var carrito;
      var user;
      console.log(document.cookie);
      /////////////////////////////////
      /// Iniciamos el carrito vacio //
      ////////////////////////////////
      function creat_Car(){
        console.log("creando carrito");
        carrito = [];
      }
      
      function read_cookie(){
        var cookies = document.cookie;
      }
      
      ///////////////////////////////////////////////
      /// Buscamos usuario para darle el contenido //
      ///////////////////////////////////////////////
      
      function SeekUser(){
      user = document.getElementById("name_user").value;
      var existe = getCookie(user);
        if(existe != null){
          view_Car(exite);
        }else{
          view_Car(existe);
        }
      }
      
      ///////////////////////////////////////////////
      /// Añadiamos el nuevo producto al contenido //
      ///////////////////////////////////////////////
      
      function Añadir(id){
        var elemento = document.getElementById(id);
        var compra = {name_libro:elemento.name,src:elemento.src};
        ///buscamos si existe el usuaario con el contenido
        var existe = getCookie(user);
        if(existe != null){
          existe = JSON.parse(existe);
          existe.push(compra);
          setcookie(user,JSON.stringlfy(existe));
        }else{
          var list = [];
          list.push(compra);
          setcookie(user,JSON.stringlfy(list));
        }
      }
      
      
      function View_Car(existe){
        var p = "vacio";
        consola.log("===Contenido Carrito===");
        if(existe != null){
          p = JSON.parse(existe);
          consola.log(p);
        }else{
          console.log(p) 
        }
      }
      
    /////////////////////////////////////////////////
    /// Funciones que me permiten tratar la cookie //
    ////////////////////////////////////////////////
      function getCookie(name){
          var cname = name + "=";               
          var dc = document.cookie;             
          if (dc.length > 0) {              
            begin = dc.indexOf(cname);       
            if (begin != -1) {           
              begin += cname.length;       
              end = dc.indexOf(";", begin);
              if (end == -1) end = dc.length;
                return unescape(dc.substring(begin, end));
            } 
          }
          return null;
        }
      
      function setCokie(name,compra){
        document.cookie = name + "=" + JSON.stringlfy(compra);
      }
      
      ///falta funcion send compra 
      
      
      
    </script>
  </head>
  
  <body onload="creat_Car()">
    Nombre:<input type="text" id="name_user" onchange="SeekUser()">
    <button type="button" onclick="send_compra()">Comprar</button>
    <br>
    <div>
      <img name="hulk" id="primer" src ="localhost:3000/imagenes/hulk" alt="hulk"></img>
      <button onclick="añadir('primer')">Add</button>
    </div>
   <div>
      <img name ="curso fotografia" id="segundo" src ="localhost:3000/imagenes/curso" alt="curso fotografia"></img>
      <button onclick="añadir('segundo')">Add</button>
   </div>
    <div>
      <img name ="vengadores" id="tercero" src ="localhost:3000/imagenes/vengadores" alt="vengadores"></img>
      <button onclick="añadir('tercero')">Add</button>     
    </div>
    <div>
      <img name ="analisis" id="cuarto" src ="localhost:3000/imagenes/analisis" alt="analisis"></img>
      <button type="button" onclick="añadir('cuarto')">Add</button>
    </div>
    
    <p id ="view_car"></p>
  </body>
<html>
